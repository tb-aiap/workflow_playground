name: Docker Image CI

on:
  workflow_dispatch:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
env:
  docker_path: File/docker/Dockerfile
  image_name: my_image
jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Echo something 
      run: echo $(pwd) 

    - name: Build the Docker image
      run: docker build . --file ${docker_path} --tag ${image_name}:$(date +%s)

    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: ${image_name} 
        path: ${{ runner.temp }}/myimage.tar